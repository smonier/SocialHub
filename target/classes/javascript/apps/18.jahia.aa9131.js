"use strict";(self.webpackChunkSocialHub=self.webpackChunkSocialHub||[]).push([[18],{18:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(119),l=a(816),o=a(207),r=a.n(o);const i={ROUTE:"/SocialHub",ROUTE_DEFAULT_PATH:""};var s=a(557),c=a(255),d=a(262),p=a.n(d),u=a(658),m=a(945),g=a(987),y=new m.HttpLink({uri:"/modules/graphql",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});const f=new m.ApolloClient({link:y,cache:new m.InMemoryCache({typePolicies:{Query:{fields:{}}}}),defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network",errorPolicy:"all"},query:{fetchPolicy:"network-only",errorPolicy:"all"},mutate:{errorPolicy:"all"}}});var h,b,x,v,E,k=a(66),T=a(904),w=a(721),C=(0,m.gql)(h||(h=(0,w.A)(['\n    query GetSocialPosts($path: String!) {\n        jcr {\n            nodeByPath(path: $path) {\n                children(typesFilter: { types: ["socialnt:post"] }) {\n                    nodes {\n                        uuid\n                        name\n                        primaryNodeType {\n                            name\n                        }\n                        properties(names: [\n                            "social:title",\n                            "social:status",\n                            "social:scheduledAt",\n                            "social:platform",\n                            "social:externalId",\n                            "jcr:lastModified",\n                            "j:lastPublished",\n                            "j:published",\n                            "j:lastPublishedBy"\n                        ]) {\n                            name\n                            value\n                            values\n                        }\n                    }\n                }\n            }\n        }\n    }\n']))),B=(0,m.gql)(b||(b=(0,w.A)(['\n    query GetScheduledPosts($path: String!) {\n        jcr {\n            nodeByPath(path: $path) {\n                children(typesFilter: { types: ["socialnt:post"] }) {\n                    nodes {\n                        uuid\n                        name\n                        properties(names: [\n                            "social:title",\n                            "social:status",\n                            "social:scheduledAt",\n                            "social:platform",\n                            "jcr:lastModified",\n                            "j:lastPublished",\n                            "j:published"\n                        ]) {\n                            name\n                            value\n                            values\n                        }\n                    }\n                }\n            }\n        }\n    }\n']))),S=(0,m.gql)(x||(x=(0,w.A)(['\n    query GetSocialAccounts {\n        jcr {\n            nodesByCriteria(criteria: { nodeType: "socialnt:account" }) {\n                nodes {\n                    uuid\n                    path\n                    name\n                    properties(names: [\n                        "social:platform",\n                        "social:label",\n                        "social:handle",\n                        "social:pageId",\n                        "social:accessToken",\n                        "social:refreshToken",\n                        "social:tokenExpiry",\n                        "social:isActive"\n                    ]) {\n                        name\n                        value\n                        values\n                    }\n                }\n            }\n        }\n    }\n']))),A=(0,m.gql)(v||(v=(0,w.A)(['\n    query GetActivityLogs($path: String!) {\n        jcr {\n            nodeByPath(path: $path) {\n                children(typesFilter: { types: ["socialnt:activityLog"] }) {\n                    nodes {\n                        uuid\n                        path\n                        properties(names: [\n                            "social:timestamp",\n                            "social:action",\n                            "social:postId",\n                            "social:postTitle",\n                            "social:platform",\n                            "social:status",\n                            "social:message",\n                            "social:errorMessage",\n                            "social:userId"\n                        ]) {\n                            name\n                            value\n                        }\n                    }\n                }\n            }\n        }\n    }\n']))),P=(0,m.gql)(E||(E=(0,w.A)(['\n    mutation DeleteActivityLogs($parentPath: String!) {\n        jcr {\n            mutateNode(pathOrId: $parentPath) {\n                delete(name: "activity-logs")\n                addChild(name: "activity-logs", primaryNodeType: "jnt:contentList") {\n                    node {\n                        uuid\n                    }\n                }\n            }\n        }\n    }\n'])));const z=function(){var e,t,a=(0,u.useTranslation)("SocialHub").t,n=(null===(e=window.contextJsParameters)||void 0===e?void 0:e.siteKey)||"digitall",l="/sites/".concat(n,"/contents/social-posts"),o=(0,m.useQuery)(C,{variables:{path:l},pollInterval:3e4}),r=o.loading,i=o.error,s=o.data,c=(0,d.useCallback)(function(e){null!=e&&e.uuid?parent.top.window.CE_API.edit({uuid:e.uuid},function(){},function(){console.log("Content editor closed, reloading page..."),window.location.reload()}):console.error("Error: Post ID is missing.")},[]),y=function(e){return e?new Date(e).toLocaleString():"-"},f=function(e){switch(e){case"published":return"success";case"published-modified":return"warning";case"never-published":case"draft":default:return"default";case"scheduled":return"accent";case"failed":return"danger"}},h=function(e){switch(e){case"published":return"success";case"scheduled":return"accent";case"failed":return"danger";default:return"default"}},b=function(e){switch(e){case"published":return"Social Published";case"scheduled":return"Scheduled";case"failed":return"Failed";default:return"Draft"}},x=function(e){switch(e){case"published":return"Published";case"published-modified":return"Published & Modified";case"never-published":return"Never Published";case"scheduled":return"Scheduled";case"failed":return"Failed";default:return"Draft"}};if(r)return p().createElement("div",{style:{padding:"48px",textAlign:"center"}},p().createElement(k.Loader,{size:"big"}),p().createElement(k.Typography,{variant:"body",style:{marginTop:"16px",color:"#676767"}},a("posts.loading")));if(i)return p().createElement("div",{style:{padding:"24px"}},p().createElement("div",{style:{padding:"16px",backgroundColor:"#ffebee",borderRadius:"4px",display:"flex",alignItems:"center",gap:"12px"}},p().createElement(g.cz,{style:{color:"#c62828"}}),p().createElement("div",null,p().createElement(k.Typography,{variant:"subheading",style:{color:"#c62828"}},a("posts.error")),p().createElement(k.Typography,{variant:"body",style:{color:"#676767",marginTop:"8px"}},i.message))));var v=(null==s||null===(t=s.jcr)||void 0===t||null===(t=t.nodeByPath)||void 0===t||null===(t=t.children)||void 0===t||null===(t=t.nodes)||void 0===t?void 0:t.map(function(e){var t={uuid:e.uuid,name:e.name,title:"",status:"draft",scheduledAt:null,lastModified:null,lastPublished:null,published:null,lastPublishedBy:null,platform:null};return e.properties.forEach(function(e){switch(e.name){case"social:title":t.title=e.value;break;case"social:status":t.status=e.value;break;case"social:scheduledAt":t.scheduledAt=e.value;break;case"jcr:lastModified":t.lastModified=e.value;break;case"j:lastPublished":t.lastPublished=e.value;break;case"j:published":t.published="true"===e.value||!0===e.value;break;case"j:lastPublishedBy":t.lastPublishedBy=e.value;break;case"social:platform":t.platform=e.value||null}}),t}))||[];return 0===v.length?p().createElement("div",{style:{padding:"24px"}},p().createElement("div",{style:{padding:"48px 24px",textAlign:"center",backgroundColor:"#f5f5f5",borderRadius:"4px"}},p().createElement(k.Typography,{variant:"body",style:{color:"#9e9e9e",marginBottom:"8px"}},a("posts.empty")),p().createElement(k.Typography,{variant:"caption",style:{color:"#9e9e9e"}},a("posts.emptyDescription")))):p().createElement("div",{style:{padding:"24px"}},p().createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold"},"Social Posts (",v.length,")")),p().createElement(k.Typography,{variant:"body",style:{marginBottom:"24px",color:"#676767"}},"Browse and manage social media posts from the JCR repository"),p().createElement("div",{style:{border:"1px solid #d0d0d0",borderRadius:"4px",overflow:"hidden"}},p().createElement(k.Table,null,p().createElement(k.TableHead,null,p().createElement(k.TableRow,null,p().createElement(k.TableHeadCell,{width:"60px"},"Edit"),p().createElement(k.TableHeadCell,null,a("posts.columns.contentStatus")),p().createElement(k.TableHeadCell,null,a("posts.columns.socialStatus")),p().createElement(k.TableHeadCell,null,a("posts.columns.title")),p().createElement(k.TableHeadCell,null,a("posts.columns.platforms")),p().createElement(k.TableHeadCell,null,a("posts.columns.scheduledAt")),p().createElement(k.TableHeadCell,null,"Last Modified"),p().createElement(k.TableHeadCell,null,"Last Published"),p().createElement(k.TableHeadCell,null,"Published By"))),p().createElement(k.TableBody,null,v.map(function(e){var t,a,n,l=function(e){return null===e.published||void 0===e.published?"never-published":e.published?e.lastModified&&e.lastPublished&&new Date(e.lastModified)>new Date(e.lastPublished)?"published-modified":"published":"never-published"}(e),o=e.status||"draft";return p().createElement(k.TableRow,{key:e.uuid},p().createElement(k.TableBodyCell,{width:"60px"},p().createElement(k.Button,{icon:p().createElement(g.ai,{size:"small"}),variant:"ghost",size:"small","aria-label":"Edit post",onClick:function(){return c(e)}})),p().createElement(k.TableBodyCell,null,p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},function(e){switch(e){case"published":return p().createElement(g.D,{size:"small",style:{color:"#2e7d32"}});case"published-modified":return p().createElement(g.ai,{size:"small",style:{color:"#f57c00"}});case"never-published":return p().createElement(g.cz,{size:"small",style:{color:"#9e9e9e"}});case"scheduled":return p().createElement(g.V,{size:"small",style:{color:"#1976d2"}});case"failed":return p().createElement(g.cz,{size:"small",style:{color:"#c62828"}});default:return p().createElement(g.ai,{size:"small",style:{color:"#9e9e9e"}})}}(l),p().createElement(k.Chip,{label:x(l),color:f(l),size:"small"}))),p().createElement(k.TableBodyCell,null,p().createElement(k.Chip,{label:b(o),color:h(o),size:"small"})),p().createElement(k.TableBodyCell,null,p().createElement(k.Typography,{variant:"body",weight:"bold",style:{whiteSpace:"normal",wordBreak:"break-word"}},e.title||e.name)),p().createElement(k.TableBodyCell,null,p().createElement("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"}},e.platform&&(a=null,n="default","instagram"===(t=e.platform.toLowerCase())?(a=p().createElement(T.ao$,{size:16}),n="#E1306C"):"facebook"===t?(a=p().createElement(T.iYk,{size:16}),n="#1877F2"):"linkedin"===t&&(a=p().createElement(T.QEs,{size:16}),n="#0A66C2"),p().createElement("div",{key:"".concat(e.uuid,"-").concat(e.platform),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",backgroundColor:"default"!==n?n:"#e0e0e0",color:"default"!==n?"#fff":"#000",borderRadius:"50%",fontSize:"16px"},title:e.platform},a)))),p().createElement(k.TableBodyCell,null,p().createElement(k.Typography,{variant:"caption",style:{color:"#676767"}},y(e.scheduledAt))),p().createElement(k.TableBodyCell,null,p().createElement(k.Typography,{variant:"caption",style:{color:"#676767"}},y(e.lastModified))),p().createElement(k.TableBodyCell,null,p().createElement(k.Typography,{variant:"caption",style:{color:"#676767"}},y(e.lastPublished))),p().createElement(k.TableBodyCell,null,p().createElement(k.Typography,{variant:"caption",style:{color:"#676767"}},e.lastPublishedBy||"-")))})))))},I=function(){for(var e,t,a=(0,u.useTranslation)("SocialHub").t,n=(null===(e=window.contextJsParameters)||void 0===e?void 0:e.siteKey)||"digitall",l="/sites/".concat(n,"/contents/social-posts"),o=(0,d.useState)(new Date),r=(0,c.A)(o,2),i=r[0],s=r[1],y=(0,d.useState)(null),f=(0,c.A)(y,2),h=f[0],b=f[1],x=(0,m.useQuery)(B,{variables:{path:l},pollInterval:6e4}),v=x.loading,E=x.error,w=x.data,C=(null==w||null===(t=w.jcr)||void 0===t||null===(t=t.nodeByPath)||void 0===t||null===(t=t.children)||void 0===t||null===(t=t.nodes)||void 0===t?void 0:t.map(function(e){var t={uuid:e.uuid,name:e.name,title:"",socialStatus:"draft",scheduledAt:null,lastModified:null,lastPublished:null,published:null,platform:null};return e.properties.forEach(function(e){switch(e.name){case"social:title":t.title=e.value;break;case"social:status":t.socialStatus=e.value||"draft";break;case"social:scheduledAt":t.scheduledAt=e.value?new Date(e.value):null;break;case"jcr:lastModified":t.lastModified=e.value;break;case"j:lastPublished":t.lastPublished=e.value;break;case"j:published":t.published="true"===e.value||!0===e.value;break;case"social:platform":t.platform=e.value||null}}),t}).filter(function(e){return e.scheduledAt}))||[],S=i.getFullYear(),A=i.getMonth(),P=new Date(S,A,1),z=new Date(S,A+1,0).getDate(),I=P.getDay(),D=[a("calendar.months.january"),a("calendar.months.february"),a("calendar.months.march"),a("calendar.months.april"),a("calendar.months.may"),a("calendar.months.june"),a("calendar.months.july"),a("calendar.months.august"),a("calendar.months.september"),a("calendar.months.october"),a("calendar.months.november"),a("calendar.months.december")],R=[a("calendar.days.sunday"),a("calendar.days.monday"),a("calendar.days.tuesday"),a("calendar.days.wednesday"),a("calendar.days.thursday"),a("calendar.days.friday"),a("calendar.days.saturday")],j=function(e){return C.filter(function(t){if(!t.scheduledAt)return!1;var a=t.scheduledAt;return a.getFullYear()===S&&a.getMonth()===A&&a.getDate()===e})},L=[],F=0;F<I;F++)L.push(null);for(var H=1;H<=z;H++)L.push(H);var M=function(e){return null===e.published||void 0===e.published?"never-published":e.published?e.lastModified&&e.lastPublished&&new Date(e.lastModified)>new Date(e.lastPublished)?"published-modified":"published":"never-published"},W=function(e){switch(e){case"published":return"#2e7d32";case"published-modified":return"#f57c00";case"never-published":case"draft":default:return"#9e9e9e";case"scheduled":return"#1976d2";case"failed":return"#c62828"}},q=function(e){switch(e){case"published":return"success";case"published-modified":return"warning";case"never-published":case"draft":default:return"default";case"scheduled":return"accent";case"failed":return"danger"}},O=function(e){switch(e){case"published":return"Published";case"published-modified":return"Published & Modified";case"never-published":return"Never Published";case"scheduled":return"Scheduled";case"failed":return"Failed";default:return"Draft"}},N=function(e){switch(e){case"published":return"Social Published";case"scheduled":return"Scheduled";case"failed":return"Failed";default:return"Draft"}},Q=function(e){switch(e){case"published":return"success";case"scheduled":return"accent";case"failed":return"danger";default:return"default"}};if(v)return p().createElement("div",{style:{padding:"48px",textAlign:"center"}},p().createElement(k.Loader,{size:"big"}),p().createElement(k.Typography,{variant:"body",style:{marginTop:"16px",color:"#676767"}},a("calendar.loading")));if(E)return p().createElement("div",{style:{padding:"24px"}},p().createElement("div",{style:{padding:"16px",backgroundColor:"#ffebee",borderRadius:"4px",display:"flex",alignItems:"center",gap:"12px"}},p().createElement(g.cz,{style:{color:"#c62828"}}),p().createElement("div",null,p().createElement(k.Typography,{variant:"subheading",style:{color:"#c62828"}},a("calendar.error")),p().createElement(k.Typography,{variant:"body",style:{color:"#676767",marginTop:"8px"}},E.message))));var $=h?j(h):[];return p().createElement("div",{style:{padding:"24px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold",style:{marginBottom:"16px"}},"Calendar View"),p().createElement(k.Typography,{variant:"body",style:{marginBottom:"24px",color:"#676767"}},"View scheduled posts by date"),p().createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",padding:"16px",backgroundColor:"#f5f5f5",borderRadius:"4px"}},p().createElement(k.Button,{icon:p().createElement(g.Q,null),variant:"ghost",size:"big",onClick:function(){s(new Date(S,A-1,1)),b(null)}}),p().createElement(k.Typography,{variant:"heading",component:"h2"},D[A]," ",S),p().createElement(k.Button,{icon:p().createElement(g.R,null),variant:"ghost",size:"big",onClick:function(){s(new Date(S,A+1,1)),b(null)}})),p().createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px",marginBottom:"24px"}},R.map(function(e){return p().createElement("div",{key:e,style:{padding:"8px",textAlign:"center",fontWeight:"bold",fontSize:"12px",color:"#676767"}},e)}),L.map(function(e){if(null===e)return p().createElement("div",{key:"empty-".concat(Math.random())});var t=j(e),a=e===(new Date).getDate()&&A===(new Date).getMonth()&&S===(new Date).getFullYear(),n=e===h;return p().createElement("div",{key:"day-".concat(S,"-").concat(A,"-").concat(e),style:{padding:"8px",minHeight:"80px",border:"2px solid ".concat(n?"#007cb0":a?"#1976d2":"#d0d0d0"),borderRadius:"4px",cursor:t.length>0?"pointer":"default",backgroundColor:n?"#e3f2fd":"#fff",transition:"all 0.2s",":hover":{backgroundColor:"#f5f5f5"}},onClick:function(){return b(e)}},p().createElement("div",{style:{fontSize:"14px",fontWeight:a?"bold":"normal",marginBottom:"4px",color:a?"#1976d2":"#000"}},e),t.length>0&&p().createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px"}},t.slice(0,3).map(function(e){var t,a=M(e);return p().createElement("div",{key:"post-".concat(e.uuid),style:{fontSize:"10px",padding:"2px 4px",backgroundColor:W(a),color:"#fff",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"2px"},title:e.title},e.platform&&("instagram"===(t=e.platform.toLowerCase())?p().createElement(T.ao$,{key:e.platform,size:8}):"facebook"===t?p().createElement(T.iYk,{key:e.platform,size:8}):"linkedin"===t?p().createElement(T.QEs,{key:e.platform,size:8}):null),p().createElement("span",null,e.title||e.name))}),t.length>3&&p().createElement("div",{style:{fontSize:"10px",color:"#676767",padding:"2px 4px"}},"+",t.length-3," more")))})),null!==h&&$.length>0&&p().createElement("div",{style:{padding:"16px",border:"1px solid #d0d0d0",borderRadius:"4px",backgroundColor:"#fafafa"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold",style:{marginBottom:"12px"}},"Posts on ",D[A]," ",h,", ",S," (",$.length,")"),p().createElement("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},$.map(function(e){var t,a,n,l=M(e),o=e.socialStatus||"draft";return p().createElement("div",{key:e.uuid,style:{padding:"12px",backgroundColor:"#fff",border:"1px solid #d0d0d0",borderRadius:"4px"}},p().createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",gap:"8px"}},p().createElement(k.Typography,{variant:"body",weight:"bold",style:{flex:1}},e.title||e.name),p().createElement("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",justifyContent:"flex-end"}},p().createElement(k.Chip,{label:O(l),size:"small",color:q(l)}),p().createElement(k.Chip,{label:N(o),size:"small",color:Q(o)}))),p().createElement("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"}},e.platform&&(a=null,n="default","instagram"===(t=e.platform.toLowerCase())?(a=p().createElement(T.ao$,{style:{marginRight:"4px"}}),n="#E1306C"):"facebook"===t?(a=p().createElement(T.iYk,{style:{marginRight:"4px"}}),n="#1877F2"):"linkedin"===t&&(a=p().createElement(T.QEs,{style:{marginRight:"4px"}}),n="#0A66C2"),p().createElement("div",{key:"".concat(e.uuid,"-").concat(e.platform),style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",backgroundColor:"default"!==n?n:"#e0e0e0",color:"default"!==n?"#fff":"#000",borderRadius:"12px",fontSize:"12px",fontWeight:"500"}},a,e.platform))),p().createElement(k.Typography,{variant:"caption",style:{marginTop:"8px",color:"#676767"}},e.scheduledAt.toLocaleString()))}))))};var D=a(556),R=a.n(D),j=function(e){var t,a=e.refreshCounter,n=(0,u.useTranslation)("SocialHub").t,o=(0,d.useState)(null),i=(0,c.A)(o,2),s=i[0],g=i[1],y=(0,d.useState)(null),f=(0,c.A)(y,2),h=f[0],b=f[1],x=(0,d.useState)(!1),v=(0,c.A)(x,2),E=v[0],w=v[1],B=(null===(t=window.contextJsParameters)||void 0===t?void 0:t.siteKey)||"digitall",S="/sites/".concat(B,"/contents/social-posts"),A=(0,m.useQuery)(C,{variables:{path:S},fetchPolicy:"network-only"}),P=A.data,z=A.loading,I=A.refetch;(0,d.useEffect)(function(){console.log("[InsightsPanel] siteKey:",B),console.log("[InsightsPanel] GraphQL postsData:",P),console.log("[InsightsPanel] postsLoading:",z),console.log("[InsightsPanel] postsPath:",S)},[B,P,z,S]),(0,d.useEffect)(function(){a>0&&I()},[a,I]);var D=p().useMemo(function(){var e;if(console.log("[InsightsPanel] useMemo triggered, postsData:",P),null==P||null===(e=P.jcr)||void 0===e||null===(e=e.nodeByPath)||void 0===e||null===(e=e.children)||void 0===e||!e.nodes)return console.log("[InsightsPanel] No nodes found in GraphQL response"),[];var t=P.jcr.nodeByPath.children.nodes.map(function(e){var t={uuid:e.uuid,name:e.name,title:null,platform:null,externalId:null,status:null};return e.properties.forEach(function(e){switch(e.name){case"social:title":t.title=e.value;break;case"social:platform":t.platform=e.value;break;case"social:externalId":t.externalId=e.value;break;case"social:status":t.status=e.value}}),t});console.log("[InsightsPanel] All posts:",t),console.log("[InsightsPanel] Posts with externalId:",t.filter(function(e){return e.externalId})),console.log("[InsightsPanel] Posts with status=published:",t.filter(function(e){return"published"===e.status})),console.log("[InsightsPanel] Posts with valid platform:",t.filter(function(e){return["facebook","instagram","linkedin"].includes(e.platform)}));var a=t.filter(function(e){return e.externalId&&"published"===e.status&&["facebook","instagram","linkedin"].includes(e.platform)});return console.log("[InsightsPanel] Filtered published posts:",a),a},[P]),j=function(){var e=(0,l.A)(r().mark(function e(t){var a,n,l,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),g(t),e.prev=1,a=t.externalId,e.next=2,fetch("/modules/api/social/insights/".concat(t.platform,"/").concat(a),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if(!(n=e.sent).ok){e.next=4;break}return e.next=3,n.json();case 3:l=e.sent,b(l),e.next=5;break;case 4:console.error("Failed to fetch insights:",n.statusText),b(null);case 5:e.next=7;break;case 6:e.prev=6,o=e.catch(1),console.error("Error fetching insights:",o),b(null);case 7:return e.prev=7,w(!1),e.finish(7);case 8:case"end":return e.stop()}},e,null,[[1,6,7,8]])}));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=e.icon,a=e.label,n=e.value,l=e.color;return p().createElement("div",{style:{flex:1,minWidth:"200px",padding:"20px",backgroundColor:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"12px"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},p().createElement(t,{size:20,style:{color:l}}),p().createElement(k.Typography,{variant:"caption",style:{color:"#676767",textTransform:"uppercase",fontSize:"11px",fontWeight:"600"}},a)),p().createElement(k.Typography,{variant:"heading",style:{fontSize:"32px",fontWeight:"700",color:"#293136"}},null!=n?n.toLocaleString():"—"))};return L.propTypes={icon:R().elementType.isRequired,label:R().string.isRequired,value:R().number,color:R().string.isRequired},z?p().createElement("div",{style:{padding:"24px",textAlign:"center"}},p().createElement(k.Typography,{variant:"body"},n("insights.loading"))):p().createElement("div",{style:{display:"flex",height:"100%",overflow:"hidden"}},p().createElement("div",{style:{width:"320px",borderRight:"1px solid #d0d0d0",backgroundColor:"#fafafa",overflow:"auto"}},p().createElement("div",{style:{padding:"16px",borderBottom:"1px solid #d0d0d0",backgroundColor:"#fff"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold"},n("insights.publishedPosts")),p().createElement(k.Typography,{variant:"caption",style:{color:"#676767",marginTop:"4px"}},D.length," ",1===D.length?n("insights.post"):n("insights.posts"))),0===D.length?p().createElement("div",{style:{padding:"24px",textAlign:"center"}},p().createElement(k.Typography,{variant:"body",style:{color:"#9e9e9e"}},n("insights.noPosts"))):p().createElement("div",{style:{padding:"8px"}},D.map(function(e){return p().createElement("div",{key:e.uuid,style:{padding:"12px",marginBottom:"8px",backgroundColor:(null==s?void 0:s.uuid)===e.uuid?"#e3f2fd":"#fff",border:(null==s?void 0:s.uuid)===e.uuid?"2px solid #007cb0":"1px solid #e0e0e0",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onClick:function(){return j(e)}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"}},"facebook"===e.platform&&p().createElement(T.iYk,{size:16,style:{color:"#1877F2"}}),"instagram"===e.platform&&p().createElement(T.ao$,{size:16,style:{color:"#E1306C"}}),"linkedin"===e.platform&&p().createElement(T.QEs,{size:16,style:{color:"#0A66C2"}}),p().createElement(k.Typography,{variant:"body",weight:"bold",style:{fontSize:"14px"}},e.title||e.name)),p().createElement(k.Typography,{variant:"caption",style:{color:"#676767",fontSize:"11px"}},"ID: ",e.externalId))}))),p().createElement("div",{style:{flex:1,overflow:"auto",backgroundColor:"#f5f5f5"}},s?E?p().createElement("div",{style:{padding:"48px",textAlign:"center"}},p().createElement(k.Typography,{variant:"heading"},n("insights.fetchingData"))):h?p().createElement("div",{style:{padding:"24px"}},p().createElement("div",{style:{padding:"24px",backgroundColor:"#fff",borderRadius:"8px",marginBottom:"24px",border:"1px solid #e0e0e0"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"}},"facebook"===s.platform&&p().createElement(T.iYk,{size:24,style:{color:"#1877F2"}}),"instagram"===s.platform&&p().createElement(T.ao$,{size:24,style:{color:"#E1306C"}}),"linkedin"===s.platform&&p().createElement(T.QEs,{size:24,style:{color:"#0A66C2"}}),p().createElement(k.Typography,{variant:"heading",style:{fontSize:"24px"}},s.title||s.name)),p().createElement(k.Typography,{variant:"caption",style:{color:"#676767"}},"Post ID: ",s.externalId)),p().createElement("div",null,p().createElement(k.Typography,{variant:"subheading",weight:"bold",style:{marginBottom:"16px"}},n("insights.metrics")),p().createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px",marginBottom:"24px"}},p().createElement(L,{icon:T.Ny1,label:n("insights.impressions"),value:h.impressions,color:"#9c27b0"}),p().createElement(L,{icon:T.YXz,label:n("insights.reach"),value:h.reach,color:"#2196f3"}),p().createElement(L,{icon:T.ugv,label:n("insights.clicks"),value:h.clicks,color:"#ff9800"}),p().createElement(L,{icon:T.Mbv,label:n("insights.likes"),value:h.likes,color:"#e91e63"}),p().createElement(L,{icon:T.j1Q,label:n("insights.comments"),value:h.comments,color:"#00bcd4"}),p().createElement(L,{icon:T.Zzu,label:n("insights.shares"),value:h.shares,color:"#4caf50"})),h.engagement&&p().createElement("div",{style:{padding:"20px",backgroundColor:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold",style:{marginBottom:"12px"}},n("insights.engagement")),p().createElement(k.Typography,{variant:"body"},n("insights.engagementRate"),": ",p().createElement("strong",null,h.engagement.rate,"%"))))):p().createElement("div",{style:{padding:"48px",backgroundColor:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",textAlign:"center",margin:"24px"}},p().createElement(k.Typography,{variant:"body",style:{color:"#9e9e9e"}},n("insights.noData")),p().createElement(k.Typography,{variant:"caption",style:{color:"#9e9e9e",marginTop:"8px"}},n("insights.noDataDescription"))):p().createElement("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"48px"}},p().createElement("div",{style:{textAlign:"center",maxWidth:"400px"}},p().createElement(T.Ny1,{size:64,style:{color:"#d0d0d0",marginBottom:"16px"}}),p().createElement(k.Typography,{variant:"heading",style:{marginBottom:"8px"}},n("insights.selectPost")),p().createElement(k.Typography,{variant:"body",style:{color:"#676767"}},n("insights.selectPostDescription"))))))};j.propTypes={refreshCounter:R().number},j.defaultProps={refreshCounter:0};const L=j;var F=function(e){var t=e.onRequestComplete,a=(0,u.useTranslation)("SocialHub").t,n=(0,d.useState)("GET"),o=(0,c.A)(n,2),i=o[0],s=o[1],m=(0,d.useState)("/posts"),y=(0,c.A)(m,2),f=y[0],h=y[1],b=(0,d.useState)("default"),x=(0,c.A)(b,2),v=x[0],E=x[1],T=(0,d.useState)(""),w=(0,c.A)(T,2),C=w[0],B=w[1],S=(0,d.useState)(!1),A=(0,c.A)(S,2),P=A[0],z=A[1],I=(0,d.useState)(null),D=(0,c.A)(I,2),R=D[0],j=D[1],L=(0,d.useState)(null),F=(0,c.A)(L,2),H=F[0],M=F[1],W=function(){var e=(0,l.A)(r().mark(function e(){var a,n,l,o,s,c,d,p,u,m;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z(!0),M(null),j(null),a="/modules/social-proxy".concat(f),n=a.includes("?"),l=v&&"default"!==v?"".concat(n?"&":"?","provider=").concat(v):"",a="".concat(a).concat(l),o={method:i,headers:{"Content-Type":"application/json",Accept:"application/json"}},"POST"!==i||!C){e.next=3;break}e.prev=1,JSON.parse(C),o.body=C,e.next=3;break;case 2:return e.prev=2,e.catch(1),M("Invalid JSON in request body"),z(!1),e.abrupt("return");case 3:return s=Date.now(),e.prev=4,e.next=5,fetch(a,o);case 5:if(c=e.sent,d=Date.now()-s,!(p=c.headers.get("content-type"))||!p.includes("application/json")){e.next=7;break}return e.next=6,c.json();case 6:u=e.sent,e.next=9;break;case 7:return e.next=8,c.text();case 8:u=e.sent;case 9:c.ok?(j({status:c.status,statusText:c.statusText,data:u,duration:d}),t&&t({method:i,path:f,status:"success",statusCode:c.status,timestamp:(new Date).toISOString()})):(M({status:c.status,statusText:c.statusText,data:u,duration:d}),t&&t({method:i,path:f,status:"error",statusCode:c.status,timestamp:(new Date).toISOString()})),e.next=11;break;case 10:e.prev=10,m=e.catch(4),M({message:m.message,type:"Network Error"}),t&&t({method:i,path:f,status:"error",statusCode:0,timestamp:(new Date).toISOString()});case 11:return e.prev=11,z(!1),e.finish(11);case 12:case"end":return e.stop()}},e,null,[[1,2],[4,10,11,12]])}));return function(){return e.apply(this,arguments)}}();return p().createElement("div",{style:{padding:"24px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold",style:{marginBottom:"16px"}},a("proxyTest.title")),p().createElement(k.Typography,{variant:"body",style:{marginBottom:"24px",color:"#676767"}},a("proxyTest.description")),p().createElement("div",{style:{marginBottom:"16px"}},p().createElement(k.Typography,{variant:"caption",style:{marginBottom:"8px",display:"block"}},a("proxyTest.method")),p().createElement(k.Dropdown,{value:i,data:[{label:"GET",value:"GET"},{label:"POST",value:"POST"}],size:"medium",style:{width:"200px"},onChange:function(e,t){return s(t.value)}})),p().createElement("div",{style:{marginBottom:"16px"}},p().createElement(k.Typography,{variant:"caption",style:{marginBottom:"8px",display:"block"}},a("proxyTest.target")),p().createElement(k.Dropdown,{value:v,data:[{label:"Default",value:"default"},{label:"Facebook Graph",value:"facebook"},{label:"Instagram Graph",value:"instagram"},{label:"LinkedIn API",value:"linkedin"}],size:"medium",style:{width:"240px"},onChange:function(e,t){return E(t.value)}})),p().createElement("div",{style:{marginBottom:"16px"}},p().createElement(k.Typography,{variant:"caption",style:{marginBottom:"8px",display:"block"}},a("proxyTest.path")),p().createElement(k.Input,{fullWidth:!0,value:f,placeholder:a("proxyTest.pathPlaceholder"),onChange:function(e){return h(e.target.value)}})),"POST"===i&&p().createElement("div",{style:{marginBottom:"16px"}},p().createElement(k.Typography,{variant:"caption",style:{marginBottom:"8px",display:"block"}},a("proxyTest.body")),p().createElement("textarea",{value:C,placeholder:a("proxyTest.bodyPlaceholder"),rows:6,style:{width:"100%",fontFamily:"monospace",fontSize:"13px",padding:"8px",border:"1px solid #d0d0d0",borderRadius:"4px",resize:"vertical"},onChange:function(e){return B(e.target.value)}})),p().createElement(k.Button,{label:a("proxyTest.sendRequest"),color:"accent",size:"big",isDisabled:P||!f,style:{marginBottom:"24px"},onClick:W}),P&&p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"}},p().createElement(k.Loader,{size:"small"}),p().createElement(k.Typography,{variant:"body"},"Sending request...")),R&&p().createElement("div",{style:{padding:"16px",backgroundColor:"#e8f5e9",borderRadius:"4px",marginBottom:"16px"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"}},p().createElement(g.D,{size:"small",style:{color:"#2e7d32"}}),p().createElement(k.Typography,{variant:"subheading",style:{color:"#2e7d32"}},"Success - ",R.status," ",R.statusText),p().createElement(k.Typography,{variant:"caption",style:{marginLeft:"auto",color:"#676767"}},R.duration,"ms")),p().createElement("div",{style:{backgroundColor:"#fff",padding:"12px",borderRadius:"4px",maxHeight:"400px",overflow:"auto"}},p().createElement("pre",{style:{margin:0,fontSize:"12px",fontFamily:"monospace"}},"string"==typeof R.data?R.data:JSON.stringify(R.data,null,2)))),H&&p().createElement("div",{style:{padding:"16px",backgroundColor:"#ffebee",borderRadius:"4px",marginBottom:"16px"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"}},p().createElement(g.cz,{size:"small",style:{color:"#c62828"}}),p().createElement(k.Typography,{variant:"subheading",style:{color:"#c62828"}},H.type||"Error"," ",H.status?"- ".concat(H.status," ").concat(H.statusText):""),H.duration&&p().createElement(k.Typography,{variant:"caption",style:{marginLeft:"auto",color:"#676767"}},H.duration,"ms")),p().createElement("div",{style:{backgroundColor:"#fff",padding:"12px",borderRadius:"4px",maxHeight:"400px",overflow:"auto"}},p().createElement("pre",{style:{margin:0,fontSize:"12px",fontFamily:"monospace"}},H.message||("string"==typeof H.data?H.data:JSON.stringify(H.data,null,2))))))};F.propTypes={onRequestComplete:R().func},F.defaultProps={onRequestComplete:null};const H=F,M=function(){var e,t=(0,u.useTranslation)("SocialHub").t,a=(0,d.useState)([]),n=(0,c.A)(a,2),o=n[0],i=n[1],s=(null===(e=window.contextJsParameters)||void 0===e?void 0:e.siteKey)||"digitall",y="/sites/".concat(s,"/activity-logs"),f=(0,m.useQuery)(A,{variables:{path:y},fetchPolicy:"network-only"}),h=f.data,b=f.loading,x=f.error,v=f.refetch,E=(0,m.useMutation)(P,{onCompleted:function(){v()},onError:function(e){console.error("Failed to delete logs:",e)}}),T=(0,c.A)(E,1)[0];(0,d.useEffect)(function(){var e,t;if(null!=h&&null!==(e=h.jcr)&&void 0!==e&&null!==(e=e.nodeByPath)&&void 0!==e&&null!==(e=e.children)&&void 0!==e&&e.nodes){var a=h.jcr.nodeByPath.children.nodes.map(function(e){var t,a,n,l,o,r,i;return{id:e.uuid,timestamp:(null===(t=e.properties.find(function(e){return"social:timestamp"===e.name}))||void 0===t?void 0:t.value)||"",action:(null===(a=e.properties.find(function(e){return"social:action"===e.name}))||void 0===a?void 0:a.value)||"",postTitle:(null===(n=e.properties.find(function(e){return"social:postTitle"===e.name}))||void 0===n?void 0:n.value)||"N/A",platform:(null===(l=e.properties.find(function(e){return"social:platform"===e.name}))||void 0===l?void 0:l.value)||"All",status:(null===(o=e.properties.find(function(e){return"social:status"===e.name}))||void 0===o?void 0:o.value)||"",message:(null===(r=e.properties.find(function(e){return"social:message"===e.name}))||void 0===r?void 0:r.value)||"",errorMessage:(null===(i=e.properties.find(function(e){return"social:errorMessage"===e.name}))||void 0===i?void 0:i.value)||null}});i(a.reverse())}else null===(null==h||null===(t=h.jcr)||void 0===t?void 0:t.nodeByPath)&&i([])},[h]);var w=function(e){switch(e){case"publish_success":return"#2e7d32";case"publish_failure":return"#c62828";case"publish_attempt":return"#1976d2";case"schedule":return"#f57c00";case"rule_fired":return"#7b1fa2";default:return"#676767"}},C=function(){var e=(0,l.A)(r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(t("activityLog.confirmFlush"))){e.next=4;break}return e.prev=1,e.next=2,T({variables:{parentPath:"/sites/".concat(s)}});case 2:e.next=4;break;case 3:e.prev=3,e.catch(1);case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return p().createElement("div",{style:{padding:"24px"}},p().createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold"},t("activityLog.title")),p().createElement("div",{style:{display:"flex",gap:"8px"}},p().createElement(k.Button,{label:t("activityLog.refresh"),variant:"outlined",disabled:b,onClick:function(){return v()}}),p().createElement(k.Button,{label:t("activityLog.flushLogs"),variant:"outlined",color:"danger",disabled:b||0===o.length,onClick:C}))),p().createElement(k.Typography,{variant:"body",style:{marginBottom:"24px",color:"#676767"}},t("activityLog.description")),b&&p().createElement("div",{style:{padding:"48px 24px",textAlign:"center"}},p().createElement(k.Typography,{variant:"body"},"Loading activity logs...")),x&&!x.message.includes("PathNotFoundException")&&p().createElement("div",{style:{padding:"24px",backgroundColor:"#ffebee",borderRadius:"4px",marginBottom:"16px"}},p().createElement(k.Typography,{variant:"body",style:{color:"#c62828"}},"Error loading logs: ",x.message)),b||x||0!==o.length?!b&&o.length>0&&p().createElement("div",{style:{border:"1px solid #d0d0d0",borderRadius:"4px",overflow:"hidden"}},p().createElement("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"}},p().createElement("thead",null,p().createElement("tr",{style:{backgroundColor:"#f5f5f5"}},p().createElement("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold",borderBottom:"1px solid #d0d0d0"}},t("activityLog.columns.action")),p().createElement("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold",borderBottom:"1px solid #d0d0d0"}},t("activityLog.columns.post")),p().createElement("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold",borderBottom:"1px solid #d0d0d0"}},t("activityLog.columns.platform")),p().createElement("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold",borderBottom:"1px solid #d0d0d0"}},t("activityLog.columns.message")),p().createElement("th",{style:{padding:"12px",textAlign:"left",fontWeight:"bold",borderBottom:"1px solid #d0d0d0"}},t("activityLog.columns.timestamp")))),p().createElement("tbody",null,o.map(function(e,t){return p().createElement("tr",{key:e.id,style:{borderBottom:t<o.length-1?"1px solid #e0e0e0":"none",backgroundColor:t%2==0?"#fff":"#fafafa"}},p().createElement("td",{style:{padding:"12px"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(n=e.action).includes("success")?p().createElement(g.D,{size:"small",style:{color:"#2e7d32"}}):n.includes("failure")?p().createElement(g.cz,{size:"small",style:{color:"#c62828"}}):p().createElement(g.D,{size:"small",style:{color:"#1976d2"}}),p().createElement("span",{style:{color:w(e.action),fontWeight:"500",fontSize:"11px",textTransform:"uppercase"}},e.action.replace(/_/g," ")))),p().createElement("td",{style:{padding:"12px",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.postTitle),p().createElement("td",{style:{padding:"12px"}},p().createElement("span",{style:{padding:"2px 8px",backgroundColor:"#e3f2fd",borderRadius:"4px",fontSize:"11px",fontWeight:"500"}},e.platform)),p().createElement("td",{style:{padding:"12px",maxWidth:"300px"}},p().createElement("div",null,e.message),e.errorMessage&&p().createElement("div",{style:{marginTop:"4px",padding:"4px 8px",backgroundColor:"#ffebee",borderRadius:"4px",fontSize:"11px",color:"#c62828"}},"Error: ",e.errorMessage)),p().createElement("td",{style:{padding:"12px",color:"#676767",fontSize:"12px",whiteSpace:"nowrap"}},(a=e.timestamp,new Date(a).toLocaleString())));var a,n})))):p().createElement("div",{style:{padding:"48px 24px",textAlign:"center",backgroundColor:"#f5f5f5",borderRadius:"4px"}},p().createElement(k.Typography,{variant:"body",style:{color:"#9e9e9e"}},t("activityLog.empty"))),!b&&o.length>0&&p().createElement(k.Typography,{variant:"caption",style:{marginTop:"16px",color:"#9e9e9e"}},"Showing ",o.length," activity log entr",1!==o.length?"ies":"y"))};var W={facebook:{color:"#1877F2",icon:p().createElement(T.iYk,{size:18}),label:"Facebook"},instagram:{color:"#E1306C",icon:p().createElement(T.ao$,{size:18}),label:"Instagram"},linkedin:{color:"#0A66C2",icon:p().createElement(T.QEs,{size:18}),label:"LinkedIn"}};const q=function(){var e,t=(0,u.useTranslation)("SocialHub").t,a=(null===(e=window.contextJsParameters)||void 0===e?void 0:e.siteKey)||"digitall",n=(0,m.useQuery)(S,{fetchPolicy:"network-only"}),l=n.loading,o=n.error,r=n.data,i=n.refetch,s=(0,d.useMemo)(function(){var e;return((null==r||null===(e=r.jcr)||void 0===e||null===(e=e.nodesByCriteria)||void 0===e?void 0:e.nodes)||[]).map(function(e){var t={uuid:e.uuid,path:e.path,name:e.name,platform:"",label:"",handle:"",pageId:"",accessToken:"",refreshToken:"",tokenExpiry:"",isActive:!0};return e.properties&&e.properties.forEach(function(e){switch(e.name){case"social:platform":t.platform=e.value;break;case"social:label":t.label=e.value;break;case"social:handle":t.handle=e.value;break;case"social:pageId":t.pageId=e.value;break;case"social:accessToken":t.accessToken=e.value;break;case"social:refreshToken":t.refreshToken=e.value;break;case"social:tokenExpiry":t.tokenExpiry=e.value;break;case"social:isActive":t.isActive="true"===e.value||!0===e.value}}),t})},[r]),c=function(e){return e?e.length<=10?e:"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"—"},y=function(e,n,l,o){var r=W[e];return p().createElement("div",{key:e,style:{border:"1px solid #d0d0d0",borderRadius:"6px",padding:"16px",backgroundColor:"#fff",display:"flex",flexDirection:"column",gap:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.04)"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},p().createElement("div",{style:{width:32,height:32,borderRadius:"50%",backgroundColor:r.color,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"}},r.icon),p().createElement("div",null,p().createElement(k.Typography,{variant:"body",weight:"bold"},t(n)),p().createElement(k.Typography,{variant:"caption",style:{color:"#676767"}},t(o)))),p().createElement(k.Typography,{variant:"body",style:{color:"#444"}},t(l)),p().createElement(k.Button,{color:"accent",label:t("accounts.buttons.connect"),onClick:function(){return function(e){var t="/modules/SocialHub/oauth/".concat(e,"/start?site=").concat(a),n=window.open(t,"".concat(e,"-oauth"),"width=900,height=900");n?n.focus():console.warn("Popup blocked. Please allow popups for this site to complete OAuth.")}(e)}}))};return p().createElement("div",{style:{padding:"24px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold",style:{marginBottom:"8px"}},t("accounts.title")),p().createElement(k.Typography,{variant:"body",style:{marginBottom:"16px",color:"#676767"}},t("accounts.description")),p().createElement("div",{style:{padding:"12px 16px",backgroundColor:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:"4px",marginBottom:"16px"}},p().createElement(k.Typography,{variant:"caption",style:{color:"#444"}},t("accounts.helper"))),p().createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"12px",marginBottom:"24px"}},y("facebook","accounts.connect.facebook.title","accounts.connect.facebook.body","accounts.connect.facebook.scopes"),y("instagram","accounts.connect.instagram.title","accounts.connect.instagram.body","accounts.connect.instagram.scopes"),y("linkedin","accounts.connect.linkedin.title","accounts.connect.linkedin.body","accounts.connect.linkedin.scopes")),p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"}},p().createElement(k.Typography,{variant:"subheading",weight:"bold"},t("accounts.list.title")),p().createElement(k.Button,{size:"small",variant:"ghost",label:t("accounts.buttons.refresh"),onClick:function(){return i()}})),l&&p().createElement("div",{style:{padding:"24px",display:"flex",alignItems:"center",gap:"12px"}},p().createElement(k.Loader,{size:"small"}),p().createElement(k.Typography,{variant:"body"},t("accounts.list.loading"))),o&&p().createElement("div",{style:{padding:"16px",backgroundColor:"#ffebee",borderRadius:"4px",border:"1px solid #ffcdd2",marginBottom:"16px",display:"flex",gap:"8px",alignItems:"flex-start"}},p().createElement(g.cz,{size:"small",style:{color:"#c62828",marginTop:"2px"}}),p().createElement("div",null,p().createElement(k.Typography,{variant:"subheading",style:{color:"#c62828"}},t("accounts.list.error")),p().createElement(k.Typography,{variant:"body",style:{color:"#444"}},o.message))),!l&&0===s.length&&!o&&p().createElement("div",{style:{padding:"24px",backgroundColor:"#f5f5f5",borderRadius:"4px"}},p().createElement(k.Typography,{variant:"body",style:{color:"#666"}},t("accounts.list.empty"))),!l&&s.length>0&&p().createElement("div",{style:{border:"1px solid #d0d0d0",borderRadius:"6px",overflow:"hidden"}},p().createElement("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"}},p().createElement("thead",null,p().createElement("tr",{style:{backgroundColor:"#f5f5f5"}},p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.platform")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.label")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.handle")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.pageId")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.token")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.refreshToken")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.expiry")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.status")),p().createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #d0d0d0"}},t("accounts.list.path")))),p().createElement("tbody",null,s.map(function(e){var a,n=W[null===(a=e.platform)||void 0===a?void 0:a.toLowerCase()]||{};return p().createElement("tr",{key:e.uuid,style:{borderBottom:"1px solid #e0e0e0"}},p().createElement("td",{style:{padding:"12px"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},n.icon&&p().createElement("span",{style:{width:28,height:28,borderRadius:"50%",backgroundColor:n.color||"#e0e0e0",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"}},n.icon),p().createElement("span",{style:{fontWeight:600,color:"#293136"}},n.label||e.platform||"-"))),p().createElement("td",{style:{padding:"12px"}},e.label||"—"),p().createElement("td",{style:{padding:"12px",fontFamily:"monospace"}},e.handle||"—"),p().createElement("td",{style:{padding:"12px",fontFamily:"monospace",maxWidth:180,wordBreak:"break-word"}},e.pageId||"—"),p().createElement("td",{style:{padding:"12px",fontFamily:"monospace"}},c(e.accessToken)),p().createElement("td",{style:{padding:"12px",fontFamily:"monospace"}},c(e.refreshToken)),p().createElement("td",{style:{padding:"12px"}},e.tokenExpiry?new Date(e.tokenExpiry).toLocaleString():"—"),p().createElement("td",{style:{padding:"12px"}},p().createElement(k.Chip,{label:e.isActive?t("accounts.list.active"):t("accounts.list.inactive"),color:e.isActive?"success":"default",size:"small"})),p().createElement("td",{style:{padding:"12px",fontFamily:"monospace",fontSize:"12px",color:"#555"}},e.path||"—"))})))))},O=function(){var e=(0,u.useTranslation)("SocialHub").t,t=(0,d.useState)("posts"),a=(0,c.A)(t,2),n=a[0],l=a[1],o=(0,d.useState)([]),r=(0,c.A)(o,2),i=r[0],y=r[1],h=(0,d.useState)(0),b=(0,c.A)(h,2),x=b[0],v=b[1];return p().createElement(m.ApolloProvider,{client:f},p().createElement("div",{style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"#fff"}},p().createElement("div",{style:{padding:"24px 32px",borderBottom:"1px solid #d0d0d0",backgroundColor:"#fafafa"}},p().createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"}},p().createElement("div",{style:{display:"flex",alignItems:"center",gap:"12px"}},p().createElement(g.k,{size:"big",style:{color:"#007cb0"}}),p().createElement("h1",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#293136"}},e("app.title"))),p().createElement(k.Button,{label:e("app.refresh"),size:"big",color:"accent",variant:"outlined",onClick:function(){v(function(e){return e+1})}})),p().createElement("p",{style:{margin:0,fontSize:"14px",color:"#676767"}},e("app.description"))),p().createElement("div",{style:{display:"flex",gap:"8px",padding:"16px 32px",borderBottom:"1px solid #d0d0d0",backgroundColor:"#fff"}},p().createElement("button",{type:"button",style:{padding:"8px 16px",border:"none",borderBottom:"posts"===n?"2px solid #007cb0":"none",backgroundColor:"posts"===n?"#f0f0f0":"transparent",color:"posts"===n?"#007cb0":"#676767",cursor:"pointer",fontWeight:"posts"===n?"600":"normal",transition:"all 0.2s"},onClick:function(){return l("posts")}},e("tabs.posts")),p().createElement("button",{type:"button",style:{padding:"8px 16px",border:"none",borderBottom:"calendar"===n?"2px solid #007cb0":"none",backgroundColor:"calendar"===n?"#f0f0f0":"transparent",color:"calendar"===n?"#007cb0":"#676767",cursor:"pointer",fontWeight:"calendar"===n?"600":"normal",transition:"all 0.2s"},onClick:function(){return l("calendar")}},e("tabs.calendar")),p().createElement("button",{type:"button",style:{padding:"8px 16px",border:"none",borderBottom:"insights"===n?"2px solid #007cb0":"none",backgroundColor:"insights"===n?"#f0f0f0":"transparent",color:"insights"===n?"#007cb0":"#676767",cursor:"pointer",fontWeight:"insights"===n?"600":"normal",transition:"all 0.2s"},onClick:function(){return l("insights")}},e("tabs.insights")),p().createElement("button",{type:"button",style:{padding:"8px 16px",border:"none",borderBottom:"accounts"===n?"2px solid #007cb0":"none",backgroundColor:"accounts"===n?"#f0f0f0":"transparent",color:"accounts"===n?"#007cb0":"#676767",cursor:"pointer",fontWeight:"accounts"===n?"600":"normal",transition:"all 0.2s"},onClick:function(){return l("accounts")}},e("tabs.accounts")),p().createElement("button",{type:"button",style:{padding:"8px 16px",border:"none",borderBottom:"proxy-test"===n?"2px solid #007cb0":"none",backgroundColor:"proxy-test"===n?"#f0f0f0":"transparent",color:"proxy-test"===n?"#007cb0":"#676767",cursor:"pointer",fontWeight:"proxy-test"===n?"600":"normal",transition:"all 0.2s"},onClick:function(){return l("proxy-test")}},e("tabs.proxyTest")),p().createElement("button",{type:"button",style:{padding:"8px 16px",border:"none",borderBottom:"activity-log"===n?"2px solid #007cb0":"none",backgroundColor:"activity-log"===n?"#f0f0f0":"transparent",color:"activity-log"===n?"#007cb0":"#676767",cursor:"pointer",fontWeight:"activity-log"===n?"600":"normal",transition:"all 0.2s",position:"relative"},onClick:function(){return l("activity-log")}},e("tabs.activityLog"),i.length>0&&p().createElement("span",{style:{position:"absolute",top:"4px",right:"4px",backgroundColor:"#007cb0",color:"#fff",borderRadius:"10px",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"}},i.length))),p().createElement("div",{style:{flex:1,overflow:"auto",backgroundColor:"#fff"}},"posts"===n&&p().createElement(z,{key:"posts-".concat(x)}),"calendar"===n&&p().createElement(I,{key:"calendar-".concat(x)}),"insights"===n&&p().createElement(L,{key:"insights-".concat(x),refreshCounter:x}),"accounts"===n&&p().createElement(q,{key:"accounts-".concat(x)}),"proxy-test"===n&&p().createElement(H,{key:"proxy-".concat(x),onRequestComplete:function(e){y(function(t){return[e].concat((0,s.A)(t)).slice(0,50)})}}),"activity-log"===n&&p().createElement(M,{key:"activity-".concat(x)}))))};var N=function(){window.jahia.i18n.loadNamespaces("SocialHub");var e="accordionItem",t="contentToolsAccordion";window.jahia.uiExtender.registry.get(e,t)||n.registry.add(e,t,n.registry.get(e,"renderDefaultApps"),{targets:["jcontent:75"],icon:p().createElement(g.k,null),label:"SocialHub:accordion.title",appsTarget:"contentToolsAccordionApps"}),n.registry.add("adminRoute","SocialHub",{targets:["contentToolsAccordionApps"],icon:p().createElement(g.k,null),label:"SocialHub:app.title",path:"".concat(i.DEFAULT_ROUTE,"*"),defaultPath:i.DEFAULT_ROUTE,isSelectable:!0,render:function(){return p().createElement(d.Suspense,{fallback:"loading..."},p().createElement(O,null))}}),console.debug("%c SocialHub is activated","color: #3c8cba")},Q=a(793),$=a.n(Q);function G(){return J.apply(this,arguments)}function J(){return(J=(0,l.A)(r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,$().loadNamespaces("SocialHub");case 1:N();case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(){n.registry.add("callback","SocialHub",{targets:["jahiaApp-init:2"],callback:G})}}}]);
//# sourceMappingURL=18.jahia.aa9131.js.map